
@{
    ViewData["Title"] = "Create";
}

<h1>Create</h1>

@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
@*<script src="~/jquery/jquery.min.js"></script>*@
<script src="~/jquery/jquery.min.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $('#registerbtn').click(function () {
            var Aname = $('#name').val();
            var Aprix = $('#prix').val();
            var Adate = $('#date').val();
            var Atopic = $('#topic').val();
            var AcategoryId = $('#categoryId').val();
            var Aimage = $('#image').val();

            var data = { name: Aname, prix: Aprix, date: Adate, categoryId: AcategoryId, topic: Atopic, image: Aimage };
            $.ajax({
                url: 'https://localhost:44317/api/Product',
                data: JSON.stringify(data),
                method: 'Post',
                dataType: 'json',
                contentType: "application/json ; ; charset=utf-8",
                success: function (data) {
                    console.log(data);
                    alert('add');
                    window.location = '../';
                    console.log(data);
                },
                error: function (err) {
                    alert(err);
                    console.log(data);
                }
            });
        });
    });

    //$(document).ready(function () {

    //    var option = $('#option');

    //    $('#registerbtn').click(function () {
    //        $.ajax({

    //            url: 'api/Product',
    //            method: 'get',
    //            contentType: "application/x-www-form-urlencoded",
    //            success: function (data) {
    //                console.log(data)
    //                listProd.empty();
    //                $.each(data, function (index, val) {
    //                    var categoryId = val.categoryId;
    //                    option.append('<option>' + catégorieId + '</option>');
    //                });
    //            }, error: function (err) {
    //                console.log(err)

    //            }
    //        })
    //    })
    //});

</script>

<div class="container">
    <h1>Produit</h1>
    <hr>
    @*<div class="form-group">
            <select class="form-control" id="option">
            </select>
        </div>*@
    <form method="Post">

        <div class="form-group">
            <input class="form-control" type="text" placeholder="name" name="name" id="name">
        </div>
        <div class="form-group">
            <input class="form-control" type="text" placeholder="prix" name="prix" id="prix">
        </div>
        <div class="form-group">
            <input type="text" class="form-control" placeholder="date" name="date" id="date">
        </div>
        <div class="form-group">
            <input type="text" class="form-control" placeholder="topic" name="topic" id="topic">
        </div>
        <div class="form-group">
            <input type="text" class="form-control" placeholder="categoryId" name="categoryId" id="categoryId">
        </div>
        <div class="form-group">
            <input type="text" class="form-control" placeholder="image" name="image" id="image">
        </div>
        <button class="btn btn-primary" id="registerbtn">Add product</button>


    </form>
</div>
